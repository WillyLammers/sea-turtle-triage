/* ==========================================================================
   Stage 1 — Nest Identification Styles (Visual Overhaul)
   ========================================================================== */

/* --- Beach Scene --- */

.beachScene {
  position: fixed;
  inset: 0;
  overflow: hidden;
  z-index: 0;
}

.sky {
  position: absolute;
  inset: 0;
  transition: background 1s ease;
}

.skyMorning {
  background: linear-gradient(
    170deg,
    #5ba3d9 0%,
    #87ceeb 25%,
    #b5dff5 50%,
    #ffd1a4 80%,
    #ff9a56 100%
  );
}

.skyNight {
  background: linear-gradient(
    to bottom,
    #0a0e27 0%,
    #151d3e 30%,
    #1a2548 60%,
    #0f1d3a 100%
  );
}

/* Stars */
.stars {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.star {
  position: absolute;
  width: 2px;
  height: 2px;
  background: #fff;
  border-radius: 50%;
  opacity: 0.8;
}

.starTwinkle {
  animation: twinkle 2s ease-in-out infinite alternate;
}

@keyframes twinkle {
  0% { opacity: 0.3; transform: scale(0.8); }
  100% { opacity: 1; transform: scale(1.2); }
}

/* Moon */
.moon {
  position: absolute;
  top: 8%;
  left: 12%;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #fefcd7, #f0e68c);
  box-shadow: 0 0 30px 10px rgba(240, 230, 140, 0.25), 0 0 80px 30px rgba(240, 230, 140, 0.1);
}

.moonCrater {
  position: absolute;
  border-radius: 50%;
  background: rgba(180, 170, 100, 0.3);
}

/* Sun */
.sun {
  position: absolute;
  bottom: 52%;
  right: 8%;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 40%, #fff5cc, #ffd93d, #ffa07a);
  box-shadow: 0 0 40px 15px rgba(255, 217, 61, 0.5), 0 0 100px 40px rgba(255, 160, 122, 0.25);
  animation: sunGlow 4s ease-in-out infinite alternate;
}

@keyframes sunGlow {
  0% { box-shadow: 0 0 40px 15px rgba(255, 217, 61, 0.4), 0 0 100px 40px rgba(255, 160, 122, 0.2); }
  100% { box-shadow: 0 0 55px 22px rgba(255, 217, 61, 0.55), 0 0 130px 55px rgba(255, 160, 122, 0.3); }
}

/* Seabirds */
.seabird {
  pointer-events: none;
  z-index: 3;
  animation: birdDrift 12s ease-in-out infinite alternate;
}

@keyframes birdDrift {
  0% { transform: translateX(0) translateY(0); }
  25% { transform: translateX(20px) translateY(-8px); }
  50% { transform: translateX(40px) translateY(2px); }
  75% { transform: translateX(15px) translateY(-5px); }
  100% { transform: translateX(50px) translateY(3px); }
}

/* Dune grass */
.duneGrass {
  pointer-events: none;
  z-index: 3;
  animation: grassSway 3s ease-in-out infinite alternate;
}

@keyframes grassSway {
  0% { transform: translateX(-50%) rotate(-2deg); }
  100% { transform: translateX(-50%) rotate(2deg); }
}

/* Ocean */
.ocean {
  position: absolute;
  bottom: 40%;
  left: 0;
  right: 0;
  height: 20%;
  overflow: hidden;
}

.oceanMorning {
  background: linear-gradient(to bottom, #1a7fa6, #3fa8cc, #5fc5e0);
}

.oceanNight {
  background: linear-gradient(to bottom, #0a1628, #0f2847, #143050);
}

/* Waves */
.waves {
  position: absolute;
  bottom: 46%;
  left: 0;
  width: 200%;
  height: 40px;
  z-index: 2;
}

.wave {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 200%;
  height: 100%;
}

.wave svg {
  position: absolute;
  bottom: 0;
  width: 50%;
  height: 100%;
}

.wave1 { animation: waveSlide 8s linear infinite; opacity: 0.7; }
.wave2 { animation: waveSlide 11s linear infinite reverse; opacity: 0.5; bottom: 4px; }
.wave3 { animation: waveSlide 14s linear infinite; opacity: 0.3; bottom: 8px; }

@keyframes waveSlide {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* Shore foam */
.shoreFoam {
  position: absolute;
  bottom: 47.5%;
  left: 0;
  right: 0;
  height: 6px;
  z-index: 2;
  border-radius: 50%;
  animation: foamPulse 4s ease-in-out infinite alternate;
}

.shoreFoamMorning {
  background: linear-gradient(90deg, transparent 5%, rgba(255, 255, 255, 0.5) 20%, rgba(255, 255, 255, 0.7) 50%, rgba(255, 255, 255, 0.5) 80%, transparent 95%);
}

.shoreFoamNight {
  background: linear-gradient(90deg, transparent 5%, rgba(150, 200, 220, 0.2) 20%, rgba(150, 200, 220, 0.35) 50%, rgba(150, 200, 220, 0.2) 80%, transparent 95%);
}

@keyframes foamPulse {
  0% { opacity: 0.5; transform: translateY(0); }
  100% { opacity: 1; transform: translateY(-2px); }
}

/* Sand */
.sand {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 48%;
  z-index: 1;
}

.sandMorning {
  background:
    repeating-linear-gradient(
      90deg, transparent, transparent 3px,
      rgba(194, 168, 120, 0.08) 3px, rgba(194, 168, 120, 0.08) 6px
    ),
    repeating-linear-gradient(
      0deg, transparent, transparent 4px,
      rgba(218, 194, 146, 0.1) 4px, rgba(218, 194, 146, 0.1) 8px
    ),
    linear-gradient(to bottom, #d4b88a, #c2a878, #b89a6a);
}

.sandNight {
  background:
    repeating-linear-gradient(
      90deg, transparent, transparent 3px,
      rgba(80, 70, 50, 0.1) 3px, rgba(80, 70, 50, 0.1) 6px
    ),
    repeating-linear-gradient(
      0deg, transparent, transparent 4px,
      rgba(90, 80, 60, 0.1) 4px, rgba(90, 80, 60, 0.1) 8px
    ),
    linear-gradient(to bottom, #5a4d3a, #4a4030, #3d3425);
}

/* Clouds */
.cloud {
  position: absolute;
  pointer-events: none;
  z-index: 2;
  animation: cloudDrift 60s linear infinite;
}

.cloud2 { animation-duration: 80s; animation-delay: -20s; }
.cloud3 { animation-duration: 50s; animation-delay: -35s; }
.cloud4 { animation-duration: 70s; animation-delay: -10s; }
.cloud5 { animation-duration: 90s; animation-delay: -45s; }

@keyframes cloudDrift {
  0% { transform: translateX(-10%); }
  100% { transform: translateX(110vw); }
}

/* Sand details */
.sandDetails {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 48%;
  z-index: 1;
  pointer-events: none;
}

/* Tide line */
.tideLine {
  position: absolute;
  top: 6%;
  left: 0;
  right: 0;
  height: 3px;
  opacity: 0.35;
  z-index: 2;
}

.tideLineMorning {
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(160, 140, 100, 0.5) 10%,
    rgba(160, 140, 100, 0.8) 30%,
    rgba(160, 140, 100, 0.6) 50%,
    rgba(160, 140, 100, 0.8) 70%,
    rgba(160, 140, 100, 0.5) 90%,
    transparent 100%
  );
}

.tideLineNight {
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(80, 70, 50, 0.5) 10%,
    rgba(80, 70, 50, 0.8) 30%,
    rgba(80, 70, 50, 0.6) 50%,
    rgba(80, 70, 50, 0.8) 70%,
    rgba(80, 70, 50, 0.5) 90%,
    transparent 100%
  );
}

.beachContent {
  position: relative;
  z-index: 10;
  width: 100%;
  height: 100%;
}

/* --- Nest Illustration on sand --- */

.nestIllustration {
  position: absolute;
  bottom: 20%;
  left: 55%;
  transform: translateX(-50%);
  width: min(80%, 600px);
  z-index: 5;
  pointer-events: none;
  animation: nestFadeIn 0.6s ease-out;
}

.nestSvg {
  width: 100%;
  height: auto;
  display: block;
  filter:
    drop-shadow(0 6px 20px rgba(0, 0, 0, 0.3))
    drop-shadow(0 2px 6px rgba(0, 0, 0, 0.15));
}

@keyframes nestFadeIn {
  from { opacity: 0; transform: translateX(-50%) translateY(12px) scale(0.95); }
  to { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
}

/* --- Flashlight Overlay --- */

.flashlightOverlay {
  position: fixed;
  inset: 0;
  z-index: 20;
  cursor: none;
  touch-action: none;
}

.flashlightDark {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

/* -- Nest marker: multi-layered, visible glow -- */

.nestMarker {
  position: absolute;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 21;
  transition: width 0.4s ease, height 0.4s ease, opacity 0.3s ease;
}

.nestMarkerGlow {
  background:
    radial-gradient(circle, rgba(255, 217, 61, 0.7) 0%, rgba(255, 200, 50, 0.35) 40%, rgba(255, 180, 40, 0.1) 65%, transparent 80%);
  box-shadow:
    0 0 18px 6px rgba(255, 217, 61, 0.25),
    0 0 40px 12px rgba(255, 200, 50, 0.1);
  animation: nestPulse 2.5s ease-in-out infinite;
}

/* When flashlight is near the nest — intensify */
.nestMarkerNear {
  width: 65px;
  height: 65px;
  background:
    radial-gradient(circle, rgba(255, 217, 61, 0.9) 0%, rgba(255, 200, 50, 0.5) 35%, rgba(255, 180, 40, 0.2) 60%, transparent 80%);
  box-shadow:
    0 0 24px 10px rgba(255, 217, 61, 0.4),
    0 0 55px 20px rgba(255, 200, 50, 0.15);
  animation: nestPulseNear 1.5s ease-in-out infinite;
}

/* When found — bright burst */
.nestMarkerFound {
  width: 80px;
  height: 80px;
  background:
    radial-gradient(circle, rgba(255, 217, 61, 1) 0%, rgba(255, 200, 50, 0.7) 30%, rgba(255, 180, 40, 0.3) 55%, transparent 75%);
  box-shadow:
    0 0 40px 16px rgba(255, 217, 61, 0.6),
    0 0 80px 30px rgba(255, 200, 50, 0.2);
  animation: nestFoundBurst 0.6s ease-out forwards;
}

/* Outer ripple ring */
.nestMarkerRipple {
  position: absolute;
  width: 70px;
  height: 70px;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 21;
  border: 2px solid rgba(255, 217, 61, 0.2);
  animation: nestRipple 3s ease-out infinite;
}

.nestMarkerRippleNear {
  border-color: rgba(255, 217, 61, 0.45);
  animation: nestRipple 2s ease-out infinite;
}

/* Progress ring */
.nestProgressRing {
  position: absolute;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 22;
}

/* Found burst — expanding circle of light */
.flashlightRevealBurst {
  position: absolute;
  width: 0;
  height: 0;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 24;
  background: radial-gradient(circle, rgba(255, 230, 120, 0.5) 0%, rgba(255, 217, 61, 0.15) 50%, transparent 70%);
  animation: revealBurst 0.8s ease-out forwards;
}

@keyframes nestPulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.55; }
  50% { transform: translate(-50%, -50%) scale(1.25); opacity: 0.85; }
}

@keyframes nestPulseNear {
  0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.7; }
  50% { transform: translate(-50%, -50%) scale(1.15); opacity: 1; }
}

@keyframes nestFoundBurst {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  60% { transform: translate(-50%, -50%) scale(1.8); opacity: 0.9; }
  100% { transform: translate(-50%, -50%) scale(2); opacity: 0.6; }
}

@keyframes nestRipple {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
  100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; }
}

@keyframes revealBurst {
  0% { width: 0; height: 0; opacity: 1; }
  100% { width: 400px; height: 400px; opacity: 0; }
}

.flashlightHint {
  position: absolute;
  bottom: 15%;
  left: 50%;
  transform: translateX(-50%);
  color: rgba(255, 255, 255, 0.8);
  font-size: 1rem;
  text-align: center;
  pointer-events: none;
  z-index: 22;
  animation: fadeIn 1s ease;
  text-shadow: 0 1px 6px rgba(0, 0, 0, 0.9);
  background: rgba(0, 0, 0, 0.4);
  padding: 0.5em 1.2em;
  border-radius: 20px;
  backdrop-filter: blur(4px);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.flashlightFound {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #ffd93d;
  font-size: 2rem;
  font-weight: 700;
  text-shadow: 0 2px 16px rgba(0, 0, 0, 0.9), 0 0 40px rgba(255, 217, 61, 0.5);
  z-index: 25;
  animation: foundPop 0.6s ease-out;
  pointer-events: none;
  background: rgba(0, 0, 0, 0.55);
  padding: 0.6em 2em;
  border-radius: 16px;
  backdrop-filter: blur(4px);
  letter-spacing: 0.04em;
}

@keyframes foundPop {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.4); }
  60% { transform: translate(-50%, -50%) scale(1.15); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

/* --- Nest Card (Clipboard Design) --- */

.nestCard {
  position: absolute;
  top: 50%;
  left: 16px;
  transform: translateY(-50%);
  width: min(94%, 400px);
  background: linear-gradient(to bottom, #faf6ed, #f5eed8);
  border: 1px solid #c8b88a;
  border-radius: 8px;
  padding: 0;
  color: #3a3020;
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.35),
    0 2px 8px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
  z-index: 30;
  animation: slideCardIn 0.4s ease-out;
  max-height: 88vh;
  overflow-y: auto;
}

.nestCard::-webkit-scrollbar { width: 6px; }
.nestCard::-webkit-scrollbar-track { background: transparent; }
.nestCard::-webkit-scrollbar-thumb { background: #c8b88a; border-radius: 3px; }

@keyframes slideCardIn {
  from { opacity: 0; transform: translateY(-50%) translateX(-30px); }
  to { opacity: 1; transform: translateY(-50%); }
}

@keyframes slideCardUp {
  from { opacity: 0; transform: translateX(-50%) translateY(30px); }
  to { opacity: 1; transform: translateX(-50%); }
}

/* Clipboard clip at top */
.clipboardClip {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 31;
}

.clipMetal {
  width: 64px;
  height: 20px;
  background: linear-gradient(to bottom, #b0b0b0, #d0d0d0, #a0a0a0);
  border-radius: 4px 4px 0 0;
  border: 1px solid #888;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

/* Header */
.nestCardHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  padding: 1rem 1.2rem 0.6rem;
  border-bottom: 2px solid #d4c4a0;
}

.nestCardHeaderLeft {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.nestCardTitle {
  font-family: var(--font-display);
  font-size: 1rem;
  font-weight: 700;
  color: #3a5a2a;
  letter-spacing: 0.02em;
}

.nestCardBadge {
  font-size: 0.72rem;
  font-weight: 600;
  padding: 0.2em 0.65em;
  border-radius: 12px;
  background: rgba(45, 127, 166, 0.12);
  color: #2d7fa6;
  white-space: nowrap;
  border: 1px solid rgba(45, 127, 166, 0.2);
}

/* Nest site info */
.nestSiteInfo {
  padding: 0.5rem 1.2rem 0;
  display: flex;
  align-items: baseline;
  gap: 0.3rem;
}

.nestNumber {
  font-family: var(--font-display);
  font-size: 0.85rem;
  font-weight: 700;
  color: #5a4a2a;
}

.nestOf {
  font-size: 0.75rem;
  color: #8a7a5a;
}

/* Description */
.nestDescription {
  font-size: 0.86rem;
  line-height: 1.6;
  padding: 0.5rem 1.2rem 0.6rem;
  color: #444;
  border-bottom: 1px dashed #d4c4a0;
}

/* Clues section */
.cluesSection {
  padding: 0.6rem 1.2rem;
}

.cluesHeading {
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #3a5a2a;
  font-weight: 700;
  margin-bottom: 0.3rem;
}

.cluesList {
  list-style: none;
  margin-bottom: 0;
}

.clueItem {
  position: relative;
  padding-left: 1.1rem;
  font-size: 0.82rem;
  line-height: 1.6;
  color: #555;
}

.clueItem::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0.55em;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #6a8a44;
}

/* Classify heading */
.classifyHeading {
  font-size: 0.78rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: #5a4a2a;
  padding: 0.5rem 1.2rem 0.3rem;
  border-top: 1px dashed #d4c4a0;
}

/* Answer Buttons */
.answerGrid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  padding: 0 1.2rem 0.8rem;
}

.answerBtn {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5em 0.85em;
  font-size: 0.8rem;
  font-weight: 600;
  background: linear-gradient(135deg, #1a5276, #1a6a8a);
  color: #fff;
  border: 2px solid transparent;
  border-radius: 20px;
  transition: background 0.2s, transform 0.15s, border-color 0.2s, box-shadow 0.2s;
  cursor: pointer;
  white-space: nowrap;
}

.answerBtn:hover:not(:disabled) {
  background: linear-gradient(135deg, #22648e, #2280a0);
  transform: translateY(-1px);
  box-shadow: 0 3px 10px rgba(26, 82, 118, 0.3);
}

.answerBtn:active:not(:disabled) {
  transform: scale(0.97);
}

.answerBtn:disabled {
  cursor: default;
  opacity: 0.7;
}

.answerIcon {
  font-size: 1rem;
  line-height: 1;
}

.answerCorrect {
  background: linear-gradient(135deg, #0d8a5e, #10a870) !important;
  border-color: #0d8a5e;
  color: #fff;
  opacity: 1 !important;
  animation: correctPop 0.4s ease-out;
  box-shadow: 0 0 12px rgba(16, 168, 112, 0.4);
}

@keyframes correctPop {
  0% { transform: scale(1); }
  40% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

.answerWrong {
  background: linear-gradient(135deg, #c0303b, #d94050) !important;
  border-color: #c0303b;
  color: #fff;
  opacity: 1 !important;
  animation: shake 0.4s ease-out;
  box-shadow: 0 0 12px rgba(208, 64, 80, 0.4);
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  75% { transform: translateX(4px); }
}

.answerDimmed {
  opacity: 0.35 !important;
}

/* Result area */
.resultArea {
  margin: 0.6rem 1.2rem 1rem;
  padding: 0.8rem 1rem;
  border-radius: 8px;
  animation: resultSlideIn 0.35s ease-out;
}

@keyframes resultSlideIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.resultCorrect {
  background: linear-gradient(135deg, rgba(6, 214, 160, 0.1), rgba(16, 168, 112, 0.08));
  border: 1px solid rgba(16, 168, 112, 0.3);
}

.resultWrong {
  background: linear-gradient(135deg, rgba(230, 57, 70, 0.08), rgba(208, 64, 80, 0.06));
  border: 1px solid rgba(208, 64, 80, 0.25);
}

.resultHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.4rem;
}

.resultBadge {
  font-weight: 700;
  font-size: 0.88rem;
  padding: 0.15em 0.5em;
  border-radius: 4px;
}

.resultBadgeCorrect {
  color: #0d8a5e;
}

.resultBadgeWrong {
  color: #c0303b;
}

.resultPoints {
  font-weight: 700;
  font-size: 0.85rem;
}

.resultPointsCorrect {
  color: #0d8a5e;
}

.resultPointsWrong {
  color: #c0303b;
}

.resultCorrectAnswer {
  font-size: 0.82rem;
  color: #666;
  margin-bottom: 0.4rem;
}

.resultCorrectAnswer strong {
  color: #0d8a5e;
}

.resultExplanation {
  font-size: 0.8rem;
  line-height: 1.55;
  color: #555;
  margin-bottom: 0.6rem;
}

/* Next button (inside result area) */
.nextBtn {
  display: block;
  width: 100%;
  padding: 0.6em 1.2em;
  font-size: 0.9rem;
  font-weight: 700;
  background: linear-gradient(135deg, #1a5276, #1a6a8a);
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s, transform 0.15s, box-shadow 0.2s;
  box-shadow: 0 3px 10px rgba(26, 82, 118, 0.25);
}

.nextBtn:hover {
  background: linear-gradient(135deg, #22648e, #2280a0);
  transform: translateY(-1px);
  box-shadow: 0 5px 16px rgba(26, 82, 118, 0.35);
}

.nextBtn:active {
  transform: scale(0.98);
}

/* --- Progress Bar (top of screen) --- */

.topBar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 40;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  padding: 0.6rem 1rem;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0.1), transparent);
}

.progressContainer {
  flex: 1;
  height: 8px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 4px;
  overflow: hidden;
}

.progressFill {
  height: 100%;
  background: linear-gradient(90deg, #4ecdc4, #6dd5ed);
  border-radius: 4px;
  transition: width 0.5s ease-out;
  box-shadow: 0 0 8px rgba(78, 205, 196, 0.4);
}

.progressLabel {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.9);
  white-space: nowrap;
  font-weight: 700;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
}

/* Score display */
.scoreDisplay {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.82rem;
  font-weight: 700;
  color: #ffd93d;
  white-space: nowrap;
  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.5);
}

.scoreIcon {
  font-size: 0.9rem;
}

/* --- Nest Survey (orchestrator) --- */

.stageContainer {
  position: fixed;
  inset: 0;
}

.stageIntro {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 50;
  background: rgba(10, 22, 40, 0.88);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.5s ease-out;
}

.stageIntroIcon {
  font-size: 3rem;
  margin-bottom: 0.8rem;
}

.stageIntroTitle {
  font-family: var(--font-display);
  font-size: 2.2rem;
  color: #faf6ed;
  margin-bottom: 0.5rem;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.stageIntroSubtitle {
  font-size: 1rem;
  color: rgba(200, 220, 230, 0.9);
  margin-bottom: 2rem;
  text-align: center;
  max-width: 420px;
  line-height: 1.6;
}

.stageIntroStart {
  padding: 0.85em 2.8em;
  font-size: 1.1rem;
  font-weight: 700;
  background: linear-gradient(135deg, #4ecdc4, #2ea5a0);
  color: #fff;
  border-radius: 30px;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 20px rgba(78, 205, 196, 0.4);
  transition: transform 0.2s, box-shadow 0.2s;
  letter-spacing: 0.02em;
}

.stageIntroStart:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 28px rgba(78, 205, 196, 0.55);
}

.waitingMessage {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 50;
  background: rgba(10, 22, 40, 0.9);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.5s ease-out;
}

.waitingIcon {
  font-size: 3rem;
  margin-bottom: 0.5rem;
}

.waitingText {
  font-family: var(--font-display);
  font-size: 1.6rem;
  color: #faf6ed;
  margin-bottom: 0.3rem;
}

.waitingScore {
  font-size: 1.8rem;
  font-weight: 700;
  color: #ffd93d;
  margin-bottom: 0.5rem;
}

.waitingSub {
  font-size: 0.95rem;
  color: rgba(200, 220, 230, 0.7);
  margin-top: 0.5rem;
}

/* ── Tablet ── */
@media (max-width: 768px) {
  .nestIllustration {
    left: 50%;
    bottom: 26%;
    width: min(80%, 500px);
  }

  .nestCard {
    width: min(94%, 340px);
    left: 10px;
    max-height: 80vh;
  }

  .nestCardTitle {
    font-size: 0.88rem;
  }

  .nestDescription {
    font-size: 0.8rem;
  }

  .stageIntroTitle {
    font-size: 1.8rem;
  }

  .stageIntroSubtitle {
    font-size: 0.95rem;
    max-width: 380px;
  }
}

/* ── Mobile: card goes to bottom overlay ── */
@media (max-width: 480px) {
  .moon {
    width: 40px;
    height: 40px;
  }

  .sun {
    width: 55px;
    height: 55px;
  }

  .nestIllustration {
    bottom: 48%;
    left: 50%;
    width: min(90%, 400px);
  }

  .nestCard {
    /* Switch from side panel to bottom card on mobile */
    top: auto;
    left: 50%;
    bottom: 1%;
    transform: translateX(-50%);
    width: min(96%, 480px);
    max-height: 48dvh;
    max-height: 48vh;
    animation: slideCardUp 0.4s ease-out;
  }

  .nestCardHeader {
    padding: 0.7rem 0.9rem 0.4rem;
  }

  .nestCardTitle {
    font-size: 0.88rem;
  }

  .nestDescription {
    font-size: 0.78rem;
    padding: 0.4rem 0.9rem 0.5rem;
    line-height: 1.5;
  }

  .cluesSection {
    padding: 0.4rem 0.9rem;
  }

  .clueItem {
    font-size: 0.76rem;
    line-height: 1.5;
  }

  .classifyHeading {
    font-size: 0.72rem;
    padding: 0.4rem 0.9rem 0.2rem;
  }

  .answerGrid {
    padding: 0 0.9rem 0.6rem;
    gap: 0.35rem;
  }

  .answerBtn {
    min-height: 44px;
    padding: 0.5em 0.75em;
    font-size: 0.76rem;
  }

  .nextBtn {
    min-height: 44px;
  }

  .resultArea {
    margin: 0.4rem 0.9rem 0.6rem;
    padding: 0.6rem 0.8rem;
  }

  .resultBadge {
    font-size: 0.82rem;
  }

  .resultExplanation {
    font-size: 0.76rem;
  }

  .stageIntroTitle {
    font-size: 1.6rem;
  }

  .stageIntroSubtitle {
    font-size: 0.9rem;
    max-width: 320px;
  }

  .stageIntroStart {
    min-height: 44px;
  }

  .flashlightFound {
    font-size: 1.4rem;
    padding: 0.5em 1.4em;
  }

  .flashlightHint {
    font-size: 0.88rem;
    padding: 0.4em 1em;
    bottom: 12%;
  }

  .topBar {
    padding: 0.4rem 0.6rem;
    gap: 0.5rem;
  }

  .progressLabel {
    font-size: 0.7rem;
  }

  .scoreDisplay {
    font-size: 0.75rem;
  }
}

/* ── Landscape mobile (very short viewport) ── */
@media (max-height: 500px) {
  .nestCard {
    max-height: 80vh;
  }

  .nestDescription {
    font-size: 0.78rem;
    padding: 0.3rem 0.9rem 0.4rem;
    line-height: 1.4;
  }

  .cluesSection {
    padding: 0.3rem 0.9rem;
  }

  .nestCardHeader {
    padding: 0.5rem 0.9rem 0.3rem;
  }
}

/* ── Touch hover resets ── */
@media (hover: none) and (pointer: coarse) {
  .answerBtn:hover:not(:disabled) {
    background: linear-gradient(135deg, #1a5276, #1a6a8a);
    transform: none;
    box-shadow: none;
  }

  .nextBtn:hover {
    background: linear-gradient(135deg, #1a5276, #1a6a8a);
    transform: none;
    box-shadow: 0 3px 10px rgba(26, 82, 118, 0.25);
  }

  .stageIntroStart:hover {
    transform: none;
    box-shadow: 0 4px 20px rgba(78, 205, 196, 0.4);
  }
}
